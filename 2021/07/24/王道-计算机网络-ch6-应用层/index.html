<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ednow.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":400,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="王道应用层【考纲内容】 (一）网络应用模型 客户&#x2F;服务器模型;P2P模型 (二)域名系统(DNS) 层次域名空间;域名服务器;域名解析过程 (三）文件传输协议(FTP) FTP的工作原理;控制连接与数据连接 (四）电子邮件（E-mail) 电子邮件系统的组成结构;电子邮件格式与MIME;SMTP与POP3 (五）万维网( www) wwW的概念与组成结构;HTTP 【复习提示】 本章内容既可以以选">
<meta property="og:type" content="article">
<meta property="og:title" content="王道-计算机网络-ch6-应用层">
<meta property="og:url" content="http://ednow.github.io/2021/07/24/%E7%8E%8B%E9%81%93-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-ch6-%E5%BA%94%E7%94%A8%E5%B1%82/index.html">
<meta property="og:site_name" content="ednow">
<meta property="og:description" content="王道应用层【考纲内容】 (一）网络应用模型 客户&#x2F;服务器模型;P2P模型 (二)域名系统(DNS) 层次域名空间;域名服务器;域名解析过程 (三）文件传输协议(FTP) FTP的工作原理;控制连接与数据连接 (四）电子邮件（E-mail) 电子邮件系统的组成结构;电子邮件格式与MIME;SMTP与POP3 (五）万维网( www) wwW的概念与组成结构;HTTP 【复习提示】 本章内容既可以以选">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140045.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140241.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140352.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140753.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140853.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141352.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141605.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141701.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141850.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141956.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005142512.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143215.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143346.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143426.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143525.png">
<meta property="og:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143555.png">
<meta property="article:published_time" content="2021-07-24T01:09:49.000Z">
<meta property="article:modified_time" content="2021-10-05T06:36:41.338Z">
<meta property="article:author" content="ednow">
<meta property="article:tag" content="考研">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140045.png">

<link rel="canonical" href="http://ednow.github.io/2021/07/24/%E7%8E%8B%E9%81%93-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-ch6-%E5%BA%94%E7%94%A8%E5%B1%82/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>王道-计算机网络-ch6-应用层 | ednow</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XQGJ63ZD9Y"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XQGJ63ZD9Y');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?83f04257c97e81cca692d7c4c7fbbc9a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ednow</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ednow.github.io/2021/07/24/%E7%8E%8B%E9%81%93-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-ch6-%E5%BA%94%E7%94%A8%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ednow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ednow">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          王道-计算机网络-ch6-应用层
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-24 09:09:49" itemprop="dateCreated datePublished" datetime="2021-07-24T09:09:49+08:00">2021-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-05 14:36:41" itemprop="dateModified" datetime="2021-10-05T14:36:41+08:00">2021-10-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index"><span itemprop="name">考研</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="王道"><a href="#王道" class="headerlink" title="王道"></a>王道</h1><h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>【考纲内容】</p>
<p>(一）网络应用模型</p>
<p>客户/服务器模型;P2P模型</p>
<p>(二)域名系统(DNS)</p>
<p>层次域名空间;域名服务器;域名解析过程</p>
<p>(三）文件传输协议(FTP)</p>
<p>FTP的工作原理;控制连接与数据连接</p>
<p>(四）电子邮件（E-mail)</p>
<p>电子邮件系统的组成结构;电子邮件格式与MIME;SMTP与POP3</p>
<p>(五）万维网( www)</p>
<p>wwW的概念与组成结构;HTTP</p>
<p>【复习提示】</p>
<p>本章内容既可以以选择题的形式考查，也可以结合其他章节的内容出综合题。所以牢固掌握本章的几个典型应用层协议是关键。我们生活中的很多网络应用都是建立在这些协议的基础上的，因此在学习时要注意联系实际，提高学习的兴趣，才会获得更好的效果。</p>
<h3 id="网络应用模型"><a href="#网络应用模型" class="headerlink" title="网络应用模型"></a>网络应用模型</h3><h4 id="客户-服务器模型"><a href="#客户-服务器模型" class="headerlink" title="客户/服务器模型"></a>客户/服务器模型</h4><p>在客户/服务器(Client/Server，C/S）模型中，有一个总是打开的主机称为服务器，它服务许多来自其他称为客户机的主机请求。其工作流程如下:</p>
<p>1）服务器处于接收请求的状态。</p>
<p>2）客户机发出服务请求，并等待接收结果。</p>
<p>3）服务器收到请求后，分析请求，进行必要的处理，得到结果并发送给客户机。</p>
<p>客户程序必须知道服务器程序的地址，客户机上一般不需要特殊的硬件和复杂的操作系统。而服务器上运行的软件则是专门用来提供某种服务的程序，可同时处理多个远程或本地客户的要求。系统启动后即自动调用并一直不断地运行着，被动地等待并接收来自各地客户的请求。因此，服务器程序不需要知道客户程序的地址。</p>
<p>客户/服务器模型最主要的特征是:客户是服务请求方，服务器是服务提供方。如 Web应用程序，其中总是打开的 Web服务器服务于运行在客户机上的浏览器的请求。当Web服务器接收到来自客户机对某对象的请求时，它向该客户机发送所请求的对象以做出响应。常见的使用客户/服务器模型的应用包括Web、文件传输协议（FTP)、远程登录和电子邮件等。</p>
<p>客户/服务器模型的主要特点还有:</p>
<p>1）网络中各计算机的地位不平等，服务器可以通过对用户权限的限制来达到管理客户机的目的，使它们不能随意存储/删除数据，或进行其他受限的网络活动。整个网络的管理工作由少数服务器担当，因此网络的管理非常集中和方便。</p>
<p>2）客户机相互之间不直接通信。例如，在 Web应用中两个浏览器并不直接通信。</p>
<p>3）可扩展性不佳。受服务器硬件和网络带宽的限制，服务器支持的客户机数有限。</p>
<h4 id="P2P模型"><a href="#P2P模型" class="headerlink" title="P2P模型"></a>P2P模型</h4><p>不难看出，在C/S模型中(见图6.1)，服务器性能的好坏决定了整个系统的性能，当大量用户请求服务时，服务器就必然成为系统的瓶颈。P2P模型（见图6.2）的思想是整个网络中的传输内容不再被保存在中心服务器上，每个结点都同时具有下载、上传的功能，其权利和义务都是大体对等的。</p>
<details><summary>图6.1客户/服务器模型，图6.2 P2P模型</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005140045.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140045.png';" /></details>

<p>在P2P模型中，各计算机没有固定的客户和服务器划分。相反，任意一对计算机一-称为对等方(Peer)，直接相互通信。实际上，P2P模型从本质上来看仍然使用客户/服务器方式，每个结点既作为客户访问其他结点的资源,也作为服务器提供资源给其他结点访问。当前比较流行的P2P应用有PPlive、Bittorrent和电驴等。</p>
<p>与C/S模型相比，P2P模型的优点主要体现如下:</p>
<p>1）减轻了服务器的计算压力，消除了对某个服务器的完全依赖，可以将任务分配到各个结点上，因此大大提高了系统效率和资源利用率（例如，播放流媒体时对服务器的压力过大，而通过P2P模型，可以利用大量的客户机来提供服务)。</p>
<p>2）多个客户机之间可以直接共享文档。</p>
<p>3）可扩展性好，传统服务器有响应和带宽的限制，因此只能接受一定数量的请求。4)网络健壮性强，单个结点的失效不会影响其他部分的结点。</p>
<p>P2P模型也有缺点。在获取服务的同时，还要给其他结点提供服务，因此会占用较多的内存，影响整机速度。例如，经常进行P2P下载还会对硬盘造成较大的损伤。据某互联网调研机构统计，当前P2P程序已占互联网50%～90%的流量，使网络变得非常拥塞，因此各大ISP（互联网服务提供商，如电信、网通等）通常都对P2P应用持反对态度。</p>
<h3 id="域名系统（DNS"><a href="#域名系统（DNS" class="headerlink" title="域名系统（DNS)"></a>域名系统（DNS)</h3><p>域名系统(Domain Name System，DNS）是因特网使用的命名系统，用来把便于人们记忆的具有特定含义的主机名(如 <a target="_blank" rel="noopener" href="http://www.cskaoyan.com)转换为便于机器处理的p地址.相对于ip地址,人们更喜欢使用具有特定含义的字符串来标识因特网上的计算机.值得注意的是,dns/">www.cskaoyan.com)转换为便于机器处理的P地址。相对于IP地址，人们更喜欢使用具有特定含义的字符串来标识因特网上的计算机。值得注意的是，DNS</a> 系统采用客户/服务器模型，其协议运行在UDP之上，使用53号端口。</p>
<p>从概念上可将DNS 分为3部分:层次域名空间、域名服务器和解析器。</p>
<h4 id="层次域名空间"><a href="#层次域名空间" class="headerlink" title="层次域名空间"></a>层次域名空间</h4><p>因特网采用层次树状结构的命名方法。采用这种命名方法，任何一个连接到因特网的主机或路由器，都有一个唯一的层次结构名称，即域名(Domain Name)。域(Domain）是名字空间中一个可被管理的划分。域还可以划分为子域，而子域还可以继续划分为子域的子域，这样就形成了顶级域、二级域、三级域等。每个域名都由标号序列组成，而各标号之间用点(“.”)隔开。一个典型的例子如图6.3所示，它是王道论坛用于提供wwW服务的计算机 （Web服务器）的域名，它由三个标号组成，其中标号com是顶级域名，标号cskaoyan是二级域名，标号www是三级域名。</p>
<details><summary>图6.3
一个域名的例子</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005140241.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140241.png';" /></details>

<p>关于域名中的标号有以下几点需要注意:</p>
<p>1）标号中的英文不区分大小写。</p>
<p>2）标号中除连字符(-）外不能使用其他的标点符号。</p>
<p>3）每个标号不超过63个字符，多标号组成的完整域名最长不超过255个字符。4）级别最低的域名写在最左边，级别最高的顶级域名写在最右边。</p>
<p>顶级域名(Top Level Domain，TLD）分为如下三大类:</p>
<p>1）国家顶级域名(nTLD)。国家和某些地区的域名，如“.cn”表示中国，“.us”表示美国，“.uk”表示英国。</p>
<p>2）通用顶级域名(gTLD)。常见的有“.com”(公司)、“.net”(网络服务机构)、“.org”(非营利性组织）和“.gov”(国家或政府部门）等。</p>
<p>3）基础结构域名。这种顶级域名只有一个，即 arpa，用于反向域名解析，因此又称反向域名。</p>
<p>国家顶级域名下注册的二级域名均由该国家自行确定。图6.4展示了域名空间的树状结构。</p>
<details><summary>图6.4域名空间的树状结构
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005140352.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140352.png';" /></details>


<p>在域名系统中，每个域分别由不同的组织进行管理。每个组织都可以将它的域再分成一定数目的子域，并将这些子域委托给其他组织去管理。例如，管理CN域的中国将EDU.CN子域授权给中国教育和科研计算机网(CERNET）来管理。</p>
<h4 id="域名服务器"><a href="#域名服务器" class="headerlink" title="域名服务器"></a>域名服务器</h4><p>因特网的域名系统被设计成一个联机分布式的数据库系统，并采用客户/服务器模型。域名到IP地址的解析是由运行在域名服务器上的程序完成的，一个服务器所负责管辖的(或有权限的范围称为区（不以“域”为单位)，各单位根据具体情况来划分自己管辖范围的区，但在一个<br>中的所有结点必须是能够连通的，每个区设置相应的仪限跌白服方茄充ID城外的解析，而且还必机的域名到IP地址的映射。每个域名服务器不但能够进行一些域名到IP地址的解析，而且还必须具有连向其他域名服务器的信息。当自己不能进行域名到IP地址的转换时，能够知道到什么地方去找其他域名服务器。</p>
<p>DNS使用了大量的域名服务器，它们以层次方式组织。没有一台域名服务器具有因特网上所有主机的映射，相反，该映射分布在所有的 DNS上。采用分布式设计的 DNS，是一个在因特网上实现分布式数据库的精彩范例。主要有4种类型的域名服务器。</p>
<h5 id="根域名服务器"><a href="#根域名服务器" class="headerlink" title="根域名服务器"></a>根域名服务器</h5><p>根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。根域名服务器也是最重要的域名服务器，不管是哪个本地域名服务器，若要对因特网上任何一个域名进行解析，只要自己无法解析，就首先要求助于根域名服务器。因特网上有13个根域名服务器，尽管我们将这13个根域名服务器中的每个都视为单个服务器，但每个“服务器”实际上是冗余服务器的集群，以提供安全性和可靠性。需要注意的是，根域名服务器用来管辖顶级域(如.com)，通常它并不直接把待查询的域名直接转换成P地址，而是告诉本地域名服务器下一步应当找哪个顶级域名服务器进行查询。</p>
<h5 id="顶级域名服务器"><a href="#顶级域名服务器" class="headerlink" title="顶级域名服务器"></a>顶级域名服务器</h5><p>这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。收到 DNS查询请求时，就给出相应的回答（可能是最后的结果，也可能是下一步应当查找的域名服务器的IP地址)。</p>
<h5 id="授权域名服务器（权限域名服务器"><a href="#授权域名服务器（权限域名服务器" class="headerlink" title="授权域名服务器（权限域名服务器)"></a>授权域名服务器（权限域名服务器)</h5><p>每台主机都必须在授权域名服务器处登记。为了更加可靠地工作，一台主机最好至少有两个授权域名服务器。实际上，许多域名服务器都同时充当本地域名服务器和授权域名服务器。授权域名服务器总能将其管辖的主机名转换为该主机的IP地址。</p>
<h5 id="本地域名服务器"><a href="#本地域名服务器" class="headerlink" title="本地域名服务器"></a>本地域名服务器</h5><p>本地域名服务器对域名系统非常重要。每个因特网服务提供者(ISP)，或一所大学，甚至一所大学中的各个系，都可以拥有一个本地域名服务器。当一台主机发出 DNS 查询请求时，这个查询请求报文就发送给该主机的本地域名服务器。事实上，我们在Windows系统中配置“本地连接”时，就需要填写DNS地址，这个地址就是本地DNS（域名服务器）的地址。</p>
<p>DNS的层次结构如图6.5所示。</p>
<details><summary>图6.5 DNS的层次结构</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005140753.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140753.png';" /></details>

<h4 id="域名解析过程"><a href="#域名解析过程" class="headerlink" title="域名解析过程"></a>域名解析过程</h4><p>域名解析是指把域名映射成为P地址或把P地址映射成域名的过程。前者称为正向解析，后者称为反向解析。当客户端需要域名解析时，通过本机的DNS客户端构造一个DNS请求报文，以UDP数据报方式发往本地域名服务器。</p>
<p>域名解析有两种方式:递归查询和递归与迭代相结合的查询。</p>
<p>递归查询的过程如图 6.6(a)所示，本地域名服务器只需向根域名服务器查询一次，后面的几次查询都是递归地在其他几个域名服务器之间进行的[ 步骤③~⑥ ]。在步骤⑦中，本地域名服务器从根域名服务器得到了所需的I地址，最后在步骤⑧中，本地域名服务器把查询结果告诉发起查询的主机。由于该方法给根域名服务造成的负载过大，所以在实际中几乎不使用。</p>
<p>常用递归与迭代相结合的查询方式如图6.6(b)所示，该方式分为两个部分。</p>
<h5 id="主机向本地域名服务器的查询采用的是递归查询"><a href="#主机向本地域名服务器的查询采用的是递归查询" class="headerlink" title="主机向本地域名服务器的查询采用的是递归查询"></a>主机向本地域名服务器的查询采用的是递归查询</h5><p>也就是说，如果本地主机所询问的本地域名服务器不知道被查询域名的P地址，那么本地域名服务器就以DNS客户的身份，向根域名服务器继续发出查询请求报文（即替该主机继续查询)，而不是让该主机自己进行下一步的查询。两种查询方式的这一步是相同的。</p>
<details><summary>图6.6两种域名解析方式工作原理</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005140853.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005140853.png';" /></details>

<h5 id="本地域名服务器向根域名服务器的查询采用迭代查询"><a href="#本地域名服务器向根域名服务器的查询采用迭代查询" class="headerlink" title="本地域名服务器向根域名服务器的查询采用迭代查询"></a>本地域名服务器向根域名服务器的查询采用迭代查询</h5><p>当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地域名服务器:“你下一步应当可哪个坝级域石服?同‘样，而级域名服务器收域名服务器向这个顶级域名服务器进行后续的食闻，如图 0.0(D)P7g下一步成向哪个权限域名到查询报文后，要么给出所要查询的P地址，要么告诉本地域名服方’I代纪态海的主机。服务器查询。最后，知道所要解析的域名的P地址后，把这个结果返回给发起查询的主机。</p>
<p>下面举例说明域名解析的过程。假定某客户机想获知域名为y.abc.com主机的IP地址，域名解析的过程（(共使用了8个UDP报文）如下:</p>
<p>${\textstyle\unicode{x2460}}$  客户机向其本地域名服务器发出 DNS请求报文（递归查询)。</p>
<p>②本地域名服务器收到请求后，查询本地缓存，若没有该记录，则以DNS客户的身份向根域名服务器发出解析请求报文（迭代查询)。</p>
<p>③根域名服务器收到请求后，判断该域名属于.com 域，将对应的顶级域名服务器dns.com的IP地址返回给本地域名服务器。</p>
<p>④本地域名服务器向顶级域名服务器dns.com发出解析请求报文（迭代查询)。</p>
<p>${\textstyle\unicode{x2464}}$  顶级域名服务器dns.com收到请求后，判断该域名属于abc.com域，因此将对应的授权域名服务器dns.abc.com的IP地址返回给本地域名服务器。</p>
<p>⑥本地域名服务器向授权域名服务器dns.abc.com发起解析请求报文（迭代查询)。</p>
<p>⑦授权域名服务器dns.abc.com收到请求后，将查询结果返回给本地域名服务器。</p>
<p>${\textstyle\unicode{x2467}}$  本地域名服务器将查询结果保存到本地缓存，同时返回给客户机。</p>
<p>为了提高DNS的查询效率，并减少因特网上的 DNS查询报文数量，在域名服务器中广泛地使用了高速缓存。当一个 DNS服务器接收到 DNS查询结果时，它能将该DNS信息缓存在高速缓存中。这样，当另一个相同的域名查询到达该DNS服务器时，该服务器就能够直接提供所要求的IP地址，而不需要再去向其他DNS 服务器询问。因为主机名和IP地址之间的映射不是永久的，所以DNS 服务器将在一段时间后丢弃高速缓存中的信息。</p>
<h3 id="文件传输协议（FTP）"><a href="#文件传输协议（FTP）" class="headerlink" title="文件传输协议（FTP）"></a>文件传输协议（FTP）</h3><h4 id="FTP的工作原理"><a href="#FTP的工作原理" class="headerlink" title="FTP的工作原理"></a>FTP的工作原理</h4><p>文件传输协议（File Transfer Protocol，FTP)是因特网上使用得最广泛的文件传输协议。提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。它屏蔽了各计算机系统的细节，因而适合于在异构网络中的任意计算机之间传送文件。</p>
<p>FTP提供以下功能:</p>
<p>①提供不同种类主机系统（硬、软件体系等都可以不同)之间的文件传输能力。</p>
<p>②以用户权限管理的方式提供用户对远程FTP服务器上的文件管理能力。</p>
<p>③以匿名FTP的方式提供公用文件共享的能力。</p>
<p>FTP采用客户!服务器的工作方式，它使用TCP可靠的传输服务。一个FTP服务器进程可同时为多个客户进程提供服务。FTP的服务器进程由两大部分组成:一个主进程，负责接收新的请求;另外有若干从属进程，负责处理单个请求。其工作步骤如下:</p>
<p>①打开熟知端口21（控制端口)，使客户进程能够连接上。②等待客户进程发连接请求。</p>
<p>③启动从属进程来处理客户进程发来的请求。主进程与从属进程并发执行，从属进程对客户进程的请求处理完毕后即终止。</p>
<p>④回到等待状态，继续接收其他客户进程的请求。</p>
<p>FTP服务器必须在整个会话期间保留用户的状态信息。特别是服务器必须把指定的用户账户与控制连接联系起来，服务器必须追踪用户在远程目录树上的当前位置。</p>
<h4 id="控制连接与数据连接"><a href="#控制连接与数据连接" class="headerlink" title="控制连接与数据连接"></a>控制连接与数据连接</h4><p>FTP在工作时使用两个并行的TCP连接（见图6.7):一个是控制连接（端口号21)，一个是数据连接（端口号20)。使用两个不同的端口号可使协议更加简单和更容易实现。</p>
<details><summary>图6.7控制连接和数据连接</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005141352.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141352.png';" /></details>

<h5 id="控制连接"><a href="#控制连接" class="headerlink" title="控制连接"></a>控制连接</h5><p>服务器监听21号端口，等待客户连接，建立在这个端口上的连接称为控制连接，控制连接用来传输控制信息（如连接请求、传送请求等)，并且控制信息都以7位ASCII格式传送。FTP客户发出的传送请求，通过控制连接发送给服务器端的控制进程，但控制连接并不用来传送文件在传输文件时还可以使用控制连接（如客户在传输中途发一个中止传输的命令)，因此控制连接在整个会话期间一直保持打开状态。</p>
<h5 id="数据连接"><a href="#数据连接" class="headerlink" title="数据连接"></a>数据连接</h5><p>服务器端的控制进程在接收到FTP客户发来的文件传输请求后，就创建“数据传送进程”和“数据连接”。数据连接用来连接客户端和服务器端的数据传送进程，数据传送进程实际完成文件的传送，在传送完毕后关闭“数据传送连接”并结束运行。</p>
<p>数据连接有两种传输模式:主动模式PORT 和被动模式PASV。PORT 模式的工作原理:客户端连接到服务器的21端口，登录成功后要读取数据时，客户端随机开放一个端口，并发送命令告知服务器，服务器收到PORT 命令和端口号后，通过20端口和客户端开放的端口连接，发送数据。PASV模式的不同点是，客户端要读取数据时，发送PASV命令到服务器，服务器在本地随机开放一个端口，并告知客户端，客户端再连接到服务器开放的端口进行数据传输。可见，是用PORT模式还是PASV模式,选择权在客户端。简单概括为，主动模式传送数据是“服务器”连接到“客户端”的端口;被动模式传送数据是“客户端”连接到“服务器”的端口。</p>
<p>因为FTP使用了一个分离的控制连接，所以也称FTP的控制信息是带外（Out-of-band)传送的。使用FTP时，若要修改服务器上的文件，则需要先将此文件传送到本地主机，然后再将修改后的文件副本传送到原服务器，来回传送耗费很多时间。网络文件系统(NFS）采用另一种思路，它允许进程打开一个远程文件，并能在该文件的某个特定位置开始读写数据。这样，NFS可使用户复制一个大文件中的一个很小的片段，而不需要复制整个大文件。</p>
<h3 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h3><h4 id="电子邮件系统的组成结构"><a href="#电子邮件系统的组成结构" class="headerlink" title="电子邮件系统的组成结构"></a>电子邮件系统的组成结构</h4><p>自从有了因特网，电子邮件就在因特网上流行起来。电子邮件是一种异步通信方式，通信时不需要双方同时在场。电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可以随时上网到自己使用的邮件服务器进行读取。</p>
<p>一个电子邮件系统应具有图6.8所示的三个最主要的组成构件，即用户代理（User Agent)、邮件服务器和电子邮件使用的协议，如 SMTP、POP3（或IMAP）等。</p>
<details><summary>图6.8电子邮件系统最主要的组成构件</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005141605.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141605.png';" /></details>

<p>用户代理(UA): 用户与电子邮件系统的接口。用户代理向用户提供-一个很友好的接口来发送和接收邮件，用户代理至少应当具有撰写、显示和邮件处理的功能。通常情况下，用户代理就是一个运行在PC.上的程序(电子邮件客户端软件)，常见的有Outlook 和Foxmail等。</p>
<p>邮件服务器:它的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况(已交付、被拒绝、丢失等)。邮件服务器采用客户/服务器方式工作，但它必须能够同时充当客户和服务器。例如，当邮件服务器A向邮件服务器B发送邮件时，A就作为SMTP客户，而B是SMTP服务<br>器;反之，当B向A发送邮件时，B就是SMTP客户，而A就是SMTP服务器。</p>
<p>邮件发送协议和读取协议:邮件发送协议用于用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件,如SMTP;邮件读取协议用于用户代理从邮件服务器读取邮件，如POP3。注意，SMTP用的是“推”(Push)的通信方式，即用户代理向邮件服务器发送邮件及在邮件服务器之间<br>发送邮件时，SMTP客户将邮件“推”送到SMTP服务器。而POP3用的是“拉”(Pull)的通信方式，即用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。</p>
<p>电子邮件的发送、接收过程可简化为如图6.9所示。</p>
<details><summary>图6.9电子邮件的发送、接收过程</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005141701.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141701.png';" /></details>

<p>下面简单介绍电子邮件的收发过程。</p>
<p>①发信人调用用户代理来撰写和编辑要发送的邮件。用户代理用SMTP把邮件传送给发送端邮件服务器。</p>
<p>②发送端邮件服务器将邮件放入邮件缓存队列中，等待发送。运行在发送端邮件服务器的SMTP客户进程，发现邮件缓存中有待发送的邮件，就向运行在接收端邮件服务器的SMTP服务器进程发起建立TCP连接。</p>
<p>④TCP连接建立后，SMTP客户进程开始向远程SMTP服务器进程发送邮件。当所有待发送邮件发完后，SMTP就关闭所建立的TCP连接。</p>
<p>${\textstyle\unicode{x2464}}$  运行在接收端邮件服务器中的SMTP服务器进程收到邮件后，将邮件放入收信人的用户邮箱，等待收信人在方便时进行读取。</p>
<p>⑥收信人打算收信时，调用用户代理，使用POP3(或IMAP）协议将自己的邮件从接收端邮件服务器的用户邮箱中取回（如果邮箱中有来信的话)。</p>
<h4 id="电子邮件格式与-MIME"><a href="#电子邮件格式与-MIME" class="headerlink" title="电子邮件格式与 MIME"></a>电子邮件格式与 MIME</h4><h5 id="电子邮件格式"><a href="#电子邮件格式" class="headerlink" title="电子邮件格式"></a>电子邮件格式</h5><p>一个电子邮件分为信封和内容两大部分，邮件内容又分为首部和主体两部分。RFC 822规定了邮件的首部格式，而邮件的主体部分则让用户自由撰写。用户写好首部后，邮件系统自动地将信封所需的信息提取出来并写在信封上，用户不需要亲自填写信封上的信息。</p>
<p>邮件内容的首部包含一些首部行，每个首部行由一个关键字后跟冒号再后跟值组成。有些关键字是必需的，有些则是可选的。最重要的关键字是To:和 Subject:。</p>
<p>To是必需的关键字，后面填入一个或多个收件人的电子邮件地址。电子邮件地址的规定格式为:收件人邮箱名@邮箱所在主机的域名，如 <a href="mailto:&#97;&#98;&#99;&#64;&#x63;&#x73;&#x6b;&#97;&#111;&#x79;&#97;&#110;&#x2e;&#99;&#111;&#x6d;">&#97;&#98;&#99;&#64;&#x63;&#x73;&#x6b;&#97;&#111;&#x79;&#97;&#110;&#x2e;&#99;&#111;&#x6d;</a>，其中收信人邮箱名即用户名.abc在cskaoyan.com这个邮件服务器上必须是唯一的。这也就保证了<a href="mailto:&#x61;&#x62;&#99;&#x40;&#x63;&#x73;&#107;&#x61;&#111;&#121;&#x61;&#110;&#x2e;&#x63;&#111;&#109;">&#x61;&#x62;&#99;&#x40;&#x63;&#x73;&#107;&#x61;&#111;&#121;&#x61;&#110;&#x2e;&#x63;&#111;&#109;</a>这个邮件地址在整个因特网上是唯一的。</p>
<p>Subject是可选关键字，是邮件的主题，反映了邮件的主要内容。</p>
<p>当然，还有一个必填的关键字是From，但它通常由邮件系统自动填入。首部与主体之间用一个空行进行分割。典型的邮件内容如下:</p>
<details><summary>图片详情</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005141850.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141850.png';" /></details>

<h5 id="多用途网际邮件扩充-MIME"><a href="#多用途网际邮件扩充-MIME" class="headerlink" title="多用途网际邮件扩充(MIME)"></a>多用途网际邮件扩充(MIME)</h5><p>由于SMTP只能传送一定长度的ASCII码，许多其他非英语国家的文字(如中文、俄文，甚至带重音符号的法文或德文）就无法传送，且无法传送可执行文件及其他二进制对象，因此提出了多用途网络邮件扩充( Multipurpose Internet MailExtensions，MIME)。</p>
<p>MIME并未改动SMTP或取代它。MIME的意图是继续使用目前的格式，但增加了邮件主体的结构，并定义了传送非ASCII码的编码规则。也就是说，MIME邮件可在现有的电子邮件程序和协议下传送。MIME与SMTP的关系如图6.10所示。</p>
<p>MIME主要包括以下三部分内容:</p>
<p>①5个新的邮件首部字段，包括MIME 版本、内容描述、内容标识、传送编码和内容类型。</p>
<p>②定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化。</p>
<p>③定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变。</p>
<details><summary>图6.10 SMTP与MIME的关系</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005141956.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005141956.png';" /></details>

<h4 id="SMTP-和-POP3"><a href="#SMTP-和-POP3" class="headerlink" title="SMTP 和 POP3"></a>SMTP 和 POP3</h4><h5 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h5><p>简单邮件传输协议（Simple Mail Transfer Protocol，SMTP）是一种提供可靠且有效的电子邮件传输的协议，它控制两个相互通信的SMTP进程交换信息。由于SMTP使用客户/服务器方式,因此负责发送邮件的SMTP进程就是SMTP客户,而负责接收邮件的SMTP进程就是SMTP服务器。SMTP用的是TCP连接，端口号为25。SMTP通信有以下三个阶段。</p>
<h6 id="连接建立"><a href="#连接建立" class="headerlink" title="连接建立"></a>连接建立</h6><p>发件人的邮件发送到发送方邮件服务器的邮件缓存中后，SMTP客户就每隔一定时间对邮件缓存扫描一次。如发现有邮件，就使用SMTP的熟知端口号(25）与接收方邮件服务器的SMTP服务器建立TCP连接。连接建立后，接收方SMTP服务器发出220 Service ready(服务就绪)。然后SMTP客户向SMTP服务器发送HELO命令，附上发送方的主机名。</p>
<p>SMTP不使用中间的邮件服务器。TCP连接总是在发送方和接收方这两个邮件服务器之间直接建立，而不管它们相隔多远，不管在传送过程中要经过多少个路由器。当接收方邮件服务器因故障暂时不能建立连接时，发送方的邮件服务器只能等待一段时间后再次尝试连接。</p>
<h6 id="邮件传送"><a href="#邮件传送" class="headerlink" title="邮件传送"></a>邮件传送</h6><p>连接建立后，就可开始传送邮件。邮件的传送从MAIL 命令开始，MAIL命令后面有发件.的地址。如 MAIL FROM:<a href="mailto:&#x68;&#x6f;&#111;&#112;&#x64;&#111;&#x67;&#x40;&#x68;&#x75;&#115;&#116;&#x2e;&#x65;&#100;&#x75;&#46;&#99;&#110;">&#x68;&#x6f;&#111;&#112;&#x64;&#111;&#x67;&#x40;&#x68;&#x75;&#115;&#116;&#x2e;&#x65;&#100;&#x75;&#46;&#99;&#110;</a>。若SMTP服务器已准备好接收邮件，则回250 OK。接着SMTP客户端发送一个或多个RCPT(收件人recipient 的缩写)命令，格式为RCPTO:&lt;收件人地址&gt;。每发送一个RCPT命令，都应有相应的信息从SMTP服务器返回，如 250 OK或550 No such user here（无此用户)。</p>
<p>RCPT命令的作用是，先弄清接收方系统是否已做好接收邮件的准备，然后才发送邮件，以便不至于发送了很长的邮件后才知道地址错误，进而避免浪费通信资源。</p>
<p>获得OK的回答后，客户端就使用DATA命令，表示要开始传输邮件的内容。正常情况下,SMTP服务器回复的信息是354 Start mail input; end with &lt; CRLF &gt;.&lt; CRLF &gt;。&lt; CRLF &gt;表示回车换行。此时SMTP客户端就可开始传送邮件内容，.并用&lt; CRLF &gt;.&lt; CRLF &gt;表示邮件内容的结束。</p>
<p>(3）连接释放</p>
<p>邮件发送完毕后，SMTP客户应发送QUIT命令。SMTP服务器返回的信息是221（服务关闭)，表示SMTP同意释放TCP连接。邮件传送的全部过程就此结束。</p>
<h6 id="连接释放"><a href="#连接释放" class="headerlink" title="连接释放"></a>连接释放</h6><p>邮件发送完毕后，SMTP客户应发送QUIT 命令。SMTP服务器返回的信息是221(服务关闭)，表示SMTP同意释放TCP连接。邮件传送的全部过程就此结束。</p>
<h5 id="POP3和IMAP"><a href="#POP3和IMAP" class="headerlink" title="POP3和IMAP"></a>POP3和IMAP</h5><p>邮局协议（Post Office Protocol，POP）是一个非常简单但功能有限的邮件读取协议，现在使用的是它的第3个版本POP3。POP3采用的是“拉”(Pull）的通信方式，当用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。</p>
<p>POP也使用客户/服务器的工作方式，在传输层使用TCP，端口号为110。接收方的用户代理上必须运行POP客户程序，而接收方的邮件服务器上则运行POP服务器程序。POP有两种工作方式:“下载并保留”和“下载并删除”。在“下载并保留”方式下，用户从邮件服务器上读取邮件后，邮件依然会保存在邮件服务器上，用户可再次从服务器上读取该邮件;而使用“下载并删除”方式时，邮件一旦被读取，就被从邮件服务器上删除，用户不能再次从服务器上读取。</p>
<p>另一个邮件读取协议是因特网报文存取协议（IMAP)，它比POP复杂得多，IMAP为用户提供了创建文件夹、在不同文件夹之间移动邮件及在远程文件夹中查询邮件等联机命令,为此IMA服务器维护了会话用户的状态信息。IMAP的另一特性是允许用户代理只获取报文的某些部分，例如可以只读取一个报文的首部，或多部分MIME报文的一部分。这非常适用于低带宽的情况,用户可能并不想取回邮箱中的所有邮件，尤其是包含很多音频或视频的大邮件。</p>
<p>此外，随着万维网的流行，目前出现了很多基于万维网的电子邮件，如Hotmail、Gmail 这种电子邮件的特点是，用户浏览器与Hotmail或Gmail的邮件服务器之间的邮件发送或接收使用的是HTTP，而仅在不同邮件服务器之间传送邮件时才使用SMTP。</p>
<h3 id="万维网-WWW"><a href="#万维网-WWW" class="headerlink" title="万维网(WWW)"></a>万维网(WWW)</h3><h4 id="WWW的概念与组成结构"><a href="#WWW的概念与组成结构" class="headerlink" title="WWW的概念与组成结构"></a>WWW的概念与组成结构</h4><p>万维网（World Wide Web，wWW)是一个分布式、联机式的信息存储空间，在这个空间中:一样有用的事物称为一样“资源”，并由一个全域“统一资源定位符”(URL)标识。这些资源通过超文本传输协议（HTTP）传送给使用者，而后者通过单击链接来获取资源。</p>
<p>万维网使用链接的方法能非常方便地从因特网上的一个站点访问另一个站点（即“链接到另一个站点”)，从而主动地按需获取丰富的信息。超文本标记语言（HyperText Markup Language,HTML)使得万维网页面的设计者可以很方便地用一个超链接从本页面的某处链接到因特网上的任何一个万维网页面，并能够在自己的计算机屏幕上显示这些页面。</p>
<p>万维网的内核部分是由三个标准构成的:</p>
<p>1)统一资源定位符（URL)。负责标识万维网上的各种文档，并使每个文档在整个万维网的范围内具有唯一的标识符URL。</p>
<p>2）超文本传输协议（HTTP)。一个应用层协议，它使用TCP连接进行可靠的传输，HTTP是万维网客户程序和服务器程序之间交互所必须严格遵守的协议。</p>
<p>3)超文本标记语言（HTML)。一种文档结构的标记语言，它使用一些约定的标记对页面上的各种信息（包括文字、声音、图像、视频等)、格式进行描述。</p>
<p>URL是对可以从因特网上得到的资源的位置和访问方法的一种简洁表示。URL相当于一个文件名在网络范围的扩展。URL的一般形式是:</p>
<p style='text-align:center'> `< 协议 >://< 主机 >:< 端口 >/< 路径 >` </p>

<p>&lt;协议&gt;指用什么协议来获取万维网文档，常见的协议有 http、ftp 等;&lt;主机&gt;是存放资源的主机在因特网中的域名或P地址;&lt;端口&gt;和&lt;路径&gt;有时可省略。在URL 中不区分大小写。</p>
<p>万维网以客户/服务器方式工作。浏览器是在用户主机上的万维网客户程序，而万维网文档所驻留的主机则运行服务器程序，这台主机称为万维网服务器。客户程序向服务器程序发出请求服务器程序向客户程序送回客户所要的万维网文档。工作流程如下:</p>
<p>1）Web用户使用浏览器（指定URL)与Web服务器建立连接，并发送浏览请求。</p>
<p>2)Web服务器把URL转换为文件路径，并返回信息给Web浏览器。</p>
<p>3）通信完成，关闭连接。</p>
<p>万维网是无数个网络站点和网页的集合，它们在一起构成了因特网最主要的部分（因特网也包括电子邮件、Usenet和新闻组)。</p>
<h4 id="超文本传输协议（HTTP"><a href="#超文本传输协议（HTTP" class="headerlink" title="超文本传输协议（HTTP)"></a>超文本传输协议（HTTP)</h4><p>HTTP定义了浏览器（万维网客户进程）怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器。从层次的角度看，HTTP是面向事务的（Transaction-oriented）应用层协议，它规定了在浏览器和服务器之间的请求和响应的格式与规则，是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。</p>
<details><summary>图6.11万维网的工作过程
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005142512.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005142512.png';" /></details>

<h5 id="HTTP的操作过程"><a href="#HTTP的操作过程" class="headerlink" title="HTTP的操作过程"></a>HTTP的操作过程</h5><p>从协议执行过程来说，浏览器要访问wwW服务器时，首先要完成对 wWW服务器的域名解析。一旦获得了服务器的P地址，浏览器就通过TCP向服务器发送连接建立请求。</p>
<p>万维网的大致工作过程如图6.11所示。每个万维网站点都有一个服务器进程，它不断地监听TCP的端口80（默认)，当监听到连接请求后便与浏览器建立TCP连接。然后，浏览器就向服务器发送请求获取某个 Web页面的HTTP请求。服务器收到请求后，将构建所请求Web页的必需信息，并通过HTTP响应返回给浏览器。浏览器再将信息进行解释，然后将Web页显示给用户。最后，TCP连接释放。</p>
<p>在浏览器和服务器之间的请求与响应的交互，必须遵循规定的格式和规则，这些格式和规则就是HTTP。因此HTTP有两类报文:请求报文（从Web客户端向Web服务器发送服务请求)和响应报文（从Web 服务器对Web客户端请求的回答)。</p>
<p>用户单击鼠标后所发生的事件按顺序如下（以访问清华大学的网站为例);</p>
<p>1）浏览器分析链接指向页面的URL (<a target="_blank" rel="noopener" href="http://www.tsinghua.edu.cn/">http://www.tsinghua.edu.cn</a> /chn/index.htm)。2）浏览器向DNS请求解析<a target="_blank" rel="noopener" href="http://www.tsinghua.edu.cn的p地址./">www.tsinghua.edu.cn的P地址。</a></p>
<p>3）域名系统DNS解析出清华大学服务器的IP地址。</p>
<p>4）浏览器与该服务器建立TCP连接（默认端口号为80)。</p>
<p>5）浏览器发出HTTP请求:GET /chn/index.htm。</p>
<p>6）服务器通过HTTP响应把文件index.htm发送给浏览器。</p>
<p>7）释放TCP连接。</p>
<p>8）浏览器解释文件index.htm，并将 Web页显示给用户。</p>
<h5 id="HTTP的特点"><a href="#HTTP的特点" class="headerlink" title="HTTP的特点"></a>HTTP的特点</h5><p>HTTP使用TCP作为运输层协议，保证了数据的可靠传输。HTTP不必考虑数据在传输过程中被丢弃后又怎样被重传。但是，HTTP本身是无连接的(务必注意)。也就是说，虽然HTTP使用了TCP连接，但通信的双方在交换HTTP报文之前不需要先建立HTTP连接。</p>
<p>HTTP是无状态的。也就是说，同一个客户第二次访问同一个服务器上的页面时，服务器的响应与第一次被访问时的相同。因为服务器并不记得曾经访问过的这个客户，也不记得为该客户曾经服务过多少次。</p>
<p>HTTP的无状态特性简化了服务器的设计，使服务器更容易支持大量并发的HTTP请求。在实际应用中，通常使用Cookie 加数据库的方式来跟踪用户的活动(如记录用户最近浏览的商品等)。Cookie的工作原理:当用户浏览某个使用Cookie 的网站时，该网站服务器就为用户产生一个唯一的识别码，如“123456”,接着在给用户的响应报文中添加一个Set-cookie的首部行“Setcookie: 123456”。用户收到响应后，就在它管理的特定Cookie文件中添加这个服务器的主机名和Cookie识别码，当用户继续浏览这个网站时，会取出这个网站的识别码，并放入请求报文的Cookie首部行“Cookie: 123456”，服务器根据请求报文中的Cookie识别码就能从数据库中查询到该用户的活动记录，进而执行一些个性化的工作，如根据用户的历史浏览记录向其推荐新产品等。</p>
<p>HTTP既可以使用非持久连接，也可以使用持久连接（HTTP/1.1支持)。</p>
<p>对于非持久连接，每个网页元素对象（如JPEG图形、Flash等)的传输都需要单独建立一个TCP连接，如图6.12所示(第三次握手的报文段中捎带了客户对万维网文档的请求)。也就是说，请求一个万维网文档所需的时间是该文档的传输时间(与文档大小成正比)加上两倍往返时间RTT(一个RTT用于TCP连接，另一个RTT用于请求和接收文档)。每个对象引用都导致2×RTT的开销，此外每次建立新的TCP连接都要分配缓存和变量，使万维网服务器的负担很重。</p>
<p>所谓持久连接，是指万维网服务器在发送响应后仍然保持这条连接，使同一个客户（浏览器)和该服务器可以继续在这条连接上传送后续的HTTP请求和响应报文，如图6.13所示。</p>
<details><summary>图6.12请求一个万维网文档所需的时间
图6.13 使用持久连接（非流水线)</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005143215.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143215.png';" /></details>

<p>持久连接又分为非流水线和流水线两种方式。对于非流水线方式，客户在收到前一个响应后才能发出下一个请求，服务器发送完一个对象后，其TCP连接就处于空闲状态，浪费了服务器资源。HTTP/1.1 的默认方式是使用流水线的持久连接，这种情况下，客户每遇到一个对象引用就立即发出一个请求，因而客户可以逐个地连续发出对各个引用对象的请求。如果所有的请求和响应都是连续发送的，那么所有引用的对象共计经历1个RTT延迟，而不是像非流水线方式那样，每个引用都必须有1个RTT延迟。这种方式减少了TCP 连接中的空闲时间,提高了效率。</p>
<h5 id="HTTP的报文结构"><a href="#HTTP的报文结构" class="headerlink" title="HTTP的报文结构"></a>HTTP的报文结构</h5><p>HTTP是面向文本的（Text-Oriented)，因此报文中的每个字段都是一些ASCII码串，并且每个字段的长度都是不确定的。有两类HTTP报文:</p>
<ul>
<li>请求报文:从客户向服务器发送的请求报文，如图6.14(a)所示。</li>
<li>响应报文:从服务器到客户的回答，如图6.14(b)所示。</li>
</ul>
<details><summary>图6.14 HTTP的报文结构
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005143346.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143346.png';" /></details>

<p>HTTP请求报文和响应报文都由三个部分组成。从图6.14可以看出，这两种报文格式的区别就是开始行不同。</p>
<p>开始行:用于区分是请求报文还是响应报文。在请求报文中的开始行称为请求行，而在响应报文中的开始行称为状态行。开始行的三个字段之间都以空格分隔，最后的“CR”和“LF”分别代表“回车”和“换行”。请求报文的“请求行”有三个内容:方法、请求资源的URL及HTTP的版本。其中，“方法”是对所请求对象进行的操作，这些方法实际上也就是一些命令。表6.1 给出了HTTP请求报文中常用的几个方法。</p>
<p>首部行:用来说明浏览器、服务器或报文主体的一些信息。首部可以有几行,但也可以不使用。在每个首部行中都有首部字段名和它的值，每一行在结束的地方都要有“回车”和“换行”。整个首部行结束时，还有一空行将首部行和后面的实体主体分开。</p>
<p>实体主体:在请求报文中一般不用这个字段，而在响应报文中也可能没有这个字段。图6.15所示为使用Wireshark捕获的HTTP请求报文的示例，下面结合前几章的内容对请求报文（图中下部分）进行分析。</p>
<p>根据帧的结构定义，在图6.15所示的以太网数据帧中，第1<del>6个字节为目的MAC地址（默认网关地址)，即 O0-Of-e2-3f-27-3f;第7</del>12个字节为本机 MAC地址，即00-27-13-67-73-8d;第13<del>14个字节08～00为类型字段，表示上层使用的是P数据报协议。第15</del>34个字节（共20B）为P数据报的首部，其中第27～30个字节为源P地址，即 db-df-d2-70，转换成十进制为219.223.210.112;第31~34个字节为目的P地址，即 71-69-4c-O0a,转换成十进制为113.105.78.10.第35～54个字节(共20B）为TCP报文段的首部。</p>
<p>从第55个字节开始才是TCP数据部分（阴影部分)，即从应用层传递下来的数据（本例中即请求报文)，GET对应请求行的方法，/face/20.gif对应请求行的URL，HTTP/1.1对应请求行的版本，左边数字是对应字符的ASCII码，如’G’=Ox47、’E’=Ox45、”T’=Ox54等。图6.15的请求报文中首部行字段内容的含义，建议读者自行了解，也可以自己动手抓包分析。</p>
<details><summary>表6.1 HTTP请求报文中常用的几个方法
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005143426.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143426.png';" /></details>


<details><summary>图6.15使用 Wireshark捕获的HTTP请求报文的示例
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005143525.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143525.png';" /></details>

<p>右下角开始的<code>“…??.&#39; .gs…E..%..@.@..0…pgi”</code>等是上面介绍过的第1～54个字节中对应的ASCII码字符，而这些字符在这里不代表任何意义。</p>
<p>常见应用层协议小结如表6.2所示。</p>
<details><summary>表6.2常见应用层协议小结
</summary><img src="https://raw.githubusercontent.com/ednow/cloudimg/main/githubio/20211005143555.png" alt="找不到图片(Image not found)" onerror="this.onerror=null;this.src='https://gitee.com/ednow/cloudimg/raw/main/githubio/20211005143555.png';" /></details>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%80%83%E7%A0%94/" rel="tag"># 考研</a>
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"># 计算机网络</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/07/24/%E7%8E%8B%E9%81%93-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-ch5-%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="prev" title="王道-计算机网络-ch5-传输层">
      <i class="fa fa-chevron-left"></i> 王道-计算机网络-ch5-传输层
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/07/26/%E7%8E%8B%E9%81%93-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-ch1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" rel="next" title="王道-操作系统-ch1-计算机系统概论">
      王道-操作系统-ch1-计算机系统概论 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      



      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%8E%8B%E9%81%93"><span class="nav-text">王道</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="nav-text">应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B"><span class="nav-text">网络应用模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%9E%8B"><span class="nav-text">客户&#x2F;服务器模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#P2P%E6%A8%A1%E5%9E%8B"><span class="nav-text">P2P模型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%EF%BC%88DNS"><span class="nav-text">域名系统（DNS)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%82%E6%AC%A1%E5%9F%9F%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-text">层次域名空间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">域名服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="nav-text">域名解析过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%88FTP%EF%BC%89"><span class="nav-text">文件传输协议（FTP）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#FTP%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">FTP的工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E8%BF%9E%E6%8E%A5%E4%B8%8E%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5"><span class="nav-text">控制连接与数据连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">电子邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="nav-text">电子邮件系统的组成结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E6%A0%BC%E5%BC%8F%E4%B8%8E-MIME"><span class="nav-text">电子邮件格式与 MIME</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SMTP-%E5%92%8C-POP3"><span class="nav-text">SMTP 和 POP3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91-WWW"><span class="nav-text">万维网(WWW)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#WWW%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="nav-text">WWW的概念与组成结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%88HTTP"><span class="nav-text">超文本传输协议（HTTP)</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ednow</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">294</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ednow</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '04b9fe1c5636beb4acc4',
      clientSecret: '8ccb8829887eac219a8fdb018878fd0cf088a7ac',
      repo        : 'gittalk-comment',
      owner       : 'ednow',
      admin       : ['ednow'],
      id          : '0467b603f2f02aef7a2e407bd51c1193',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
